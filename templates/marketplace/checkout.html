{% extends 'base.html' %}

{% block content %}
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Checkout</h1>
        {% if cart_items_with_subtotal %}
            <div class="space-y-4">
                {% for entry in cart_items_with_subtotal %}
                    <div class="bg-white rounded-lg shadow-md p-4 flex flex-col sm:flex-row items-center justify-between gap-4 transform transition-all duration-300 hover:shadow-xl">
                        <div class="flex-1">
                            <h2 class="text-lg font-semibold text-gray-800">{{ entry.item.product.name }}</h2>
                            <p class="text-gray-600">KSh {{ entry.item.product.price }} x {{ entry.item.quantity }}</p>
                        </div>
                        <p class="text-gray-800 font-bold">KSh {{ entry.subtotal }}</p>
                    </div>
                {% endfor %}
                <div class="mt-6 bg-white p-4 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-800">Total: KSh {{ cart_total }}</h2>
                    <form method="post">
                        {% csrf_token %}
                        <button type="submit" class="mt-4 inline-block bg-blue-600 text-white py-2 px-6 rounded-lg hover:bg-blue-700 transition-colors duration-300">
                            Confirm Order
                        </button>
                        <a href="{% url 'marketplace:cart' %}" class="mt-4 inline-block text-blue-600 px-4 py-2 hover:underline">
                            Back to Cart
                        </a>
                    </form>
                </div>
            </div>
        {% else %}
            <div class="text-center py-10">
                <p class="text-gray-500 text-lg">Your cart is empty.</p>
                <a href="{% url 'marketplace:home' %}" class="text-blue-600 hover:underline">Start Shopping</a>
            </div>
        {% endif %}
    </div>
{% endblock %}